안녕하세요 비앤지시스템 전현구 사원입니다.

유선상 문의드린 내용에 대해 메일로 재문의 드립니다.

■현재상황

①Hynix형 패치인 issue2747-hynix-test-u434-2017-05-16_16-20에서는
HP-UX 의 wu-ftpd 2.6.1version에 대한 패치가 적용되어 ftp수집기가 정상 작동중입니다

②6월 정식version인 2017-06-22_19-31 에서는 다시 HP-UX 서버에 대한 ftp수집기 에러가
발생했습니다

③logpresso.sh 파일에 옵션부분 추가
JAVA_OPTS="$JAVA_OPTS -Dlogpresso.ftp.rotation.useWuFtpFix=t"
이후에도 ftp 수집오류가 발생합니다

④6월 정식version에 70번 bundle "org.logpresso.ftp"(2017-05-16_16-20version) 만 교체후 재기동
이후에는 HP-UX서버에 수집중인 수집기는 문제가 없으나
Red Hat Enterprise Linux Server release 6.5 (Santiago) 서버에 수집중인 ftp 디렉터리 와처
에서 하기와 같은 ERROR Log가 지속적으로 발생하였습니다
(현재는 수집기 정지/시작 후 정상 작동 중입니다)

■문의사항

①옵션설정이 잘못된 부분인지 6월version에서 아직 지원이 안되는 부분인지 문의드립니다

②6월version에 지원이 안되는 부분이라면 7월version 에서는 옵션 활성화가 가능한지
문의드립니다

③6월version에 "org.logpresso.ftp" bundle 만 교체해서 서비스 하는 방식에 잠재적 위험요소들이
더 있는지도 문의드립니다

감사합니다.

### Call Stack
logpresso ftp: logger [local\apc_das] cannot complete pending command

logpresso ftp: ftp logger failed
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
	at java.io.InputStreamReader.read(InputStreamReader.java:184)
	at java.io.BufferedReader.fill(BufferedReader.java:161)
	at java.io.BufferedReader.read(BufferedReader.java:182)
	at org.apache.commons.net.io.CRLFLineReader.readLine(CRLFLineReader.java:58)
	at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:314)
	at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:294)
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:483)
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:608)
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:582)
	at org.apache.commons.net.ftp.FTP.pasv(FTP.java:1007)
	at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:869)
	at org.apache.commons.net.ftp.FTPClient._retrieveFileStream(FTPClient.java:1927)
	at org.apache.commons.net.ftp.FTPClient.retrieveFileStream(FTPClient.java:1918)
	at org.logpresso.ftp.FtpDirectoryWatchLogger.loadFile(FtpDirectoryWatchLogger.java:268)
	at org.logpresso.ftp.FtpDirectoryWatchLogger.runOnce(FtpDirectoryWatchLogger.java:177)
	at org.araqne.log.api.AbstractLogger.run(AbstractLogger.java:508)
	at java.lang.Thread.run(Thread.java:745)

logpresso ftp: ftp logger failed
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:894)
	at org.apache.commons.net.ftp.FTPClient._retrieveFileStream(FTPClient.java:1927)
	at org.apache.commons.net.ftp.FTPClient.retrieveFileStream(FTPClient.java:1918)
	at org.logpresso.ftp.FtpDirectoryWatchLogger.loadFile(FtpDirectoryWatchLogger.java:268)
	at org.logpresso.ftp.FtpDirectoryWatchLogger.runOnce(FtpDirectoryWatchLogger.java:177)
	at org.araqne.log.api.AbstractLogger.run(AbstractLogger.java:508)
	at java.lang.Thread.run(Thread.java:745)
